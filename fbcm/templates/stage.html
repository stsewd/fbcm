{% import "macros.html" as macros %}
{% extends "layout.html" %}

{% block title %}{{ stage.name }}{% endblock %}

{% set championship = stage.championship %}
{% set form_id = "form-choose-stage" %}

{% block body %}
<h1>
  <a href="{{ url_for('championships', id=championship.id) }}">
    {{ championship.name }}
  </a>
</h1>
<div>
  <form id="{{ form_id }}">
    <div class="form-group">
      <label for="stage-combo">Etapa</label>
      <select id="stage-combo" class="form-control" name="stage">
        {% for stage_ in stages %}
        {% if stage_.id == stage.id %}
          {% set selected = "selected" %}
        {% endif %}
        <option value="{{ stage_.id }}" {{ selected }}>
          {{ stage_.name }}
        </option>
        {% endfor %}
      </select>
    </div>
    <div class="form-group">
      <label for="group-combo">Grupo</label>
      <select id="group-combo" class="form-control" name="group">
        {% for group_ in range(1, stage.num_groups + 1) %}
        {% if group_ == group %}
          {% set selected = "selected" %}
        {% endif %}
        <option value="{{ group_ }}" {{ selected }}>
          {{ group_ }}
        </option>
        {% endfor %}
      </select>
    </div>
  </form>

  <ul class="nav nav-tabs">
    <li class="active">
      <a data-toggle="tab" href="#teams">
        Equipos
      </a>
    </li>
    <li>
      <a data-toggle="tab" href="#matches">
        Partidos
      </a>
    </li>
  </ul>

  <div class="tab-content">
	  <div id="teams" class="tab-pane fade in active">
			<h3>HOME</h3>
			<p>Some content.</p>
		</div>
		<div id="matches" class="tab-pane fade">
			<h3>Menu 1</h3>
			<p>Some content in menu 1.</p>
		</div>
	</div>

</div>

{% endblock %}

{% block scripts %}
<script>
	$(function() {
		$('#group-combo').change(function() {
			this.form.submit();
		});

		$('#stage-combo').change(function() {
			stage = $(this).val()
			window.location = "{{ url_for('stages', championship_id=championship.id) }}" + "?stage=" + stage;
		});
	});
</script>
{% endblock %}
